{"version":3,"sources":["Component/utils/injectStyle.js","Component/ThreeSixtyViewer.js","App.js","index.js","Component/assets/cursor.svg","Component/assets/drag_cursor.svg","Component/assets/loader.svg"],"names":["injectStyle","style","styleElement","document","createElement","innerHTML","head","appendChild","memo","props","imageArr","imageKey","autoPlay","startIndex","updateIndex","handleImageChange","containerName","viewerRef","useRef","threeSixtyRef","useState","dragState","setDragState","allImagesLoaded","setAllImagesLoaded","preloadImages","urls","allImagesLoadedCallback","loadedCounter","toBeLoadedNumber","length","forEach","url","anImageLoadedCallback","img","Image","onload","src","preloadImage","imageChange","e","detail","image_index","index","item","handleMouseDown","handleMouseUp","useEffect","current","goto","addEventListener","removeEventListener","newImages","map","ite","_updateImage","ThreeSixty","image","play","_allowScroll","destroy","ref","position","cursor","DragCursor","Cursor","display","width","height","left","top","backgroundPosition","backgroundSize","backgroundRepeat","backgroundImage","Loader","animation","App","Array","reduce","acc","push","Fragment","speed","console","log","ReactDOM","render","getElementById","module","exports"],"mappings":"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","file":"static/js/main.2bd03b28.chunk.js","sourcesContent":["const injectStyle = (style) => {\n    const styleElement = document.createElement('style');\n    styleElement.innerHTML = style;\n    document.head.appendChild(styleElement);\n};\n  \nexport default injectStyle;","import React, { useEffect, useRef, memo, useState } from 'react';\nimport ThreeSixty from '@ashivliving/threesixty-js';\nimport injectStyle from './utils/injectStyle';\nimport Cursor from './assets/cursor.svg';\nimport DragCursor from './assets/drag_cursor.svg';\nimport Loader from './assets/loader.svg';\n\nconst ThreeSixtyViewer = (props) => {\n    const { imageArr, imageKey = 'image_url', autoPlay, startIndex=0, updateIndex, handleImageChange, containerName = 'reactThreesixtyContainer' } = props;\n    const viewerRef = useRef(null);\n    const threeSixtyRef = useRef(null);\n    const [dragState, setDragState] = useState(false);\n    const [allImagesLoaded, setAllImagesLoaded] = useState(false);\n\n    const keyFrameStyle = `\n    @-webkit-keyframes rotating {\n        from {\n          -webkit-transform: rotate(0deg);\n          -o-transform: rotate(0deg);\n          transform: rotate(0deg);\n        }\n        to {\n          -webkit-transform: rotate(360deg);\n          -o-transform: rotate(360deg);\n          transform: rotate(360deg);\n        }\n    }\n    @keyframes rotating {\n        from {\n          -ms-transform: rotate(0deg);\n          -moz-transform: rotate(0deg);\n          -webkit-transform: rotate(0deg);\n          -o-transform: rotate(0deg);\n          transform: rotate(0deg);\n        }\n        to {\n          -ms-transform: rotate(360deg);\n          -moz-transform: rotate(360deg);\n          -webkit-transform: rotate(360deg);\n          -o-transform: rotate(360deg);\n          transform: rotate(360deg);\n        }\n    }`;\n\n    injectStyle(keyFrameStyle);\n\n    const preloadImages = (urls, allImagesLoadedCallback) => {\n        var loadedCounter = 0;\n        var toBeLoadedNumber = urls.length;\n        urls.forEach(function (url) {\n            preloadImage(url, function () {\n                loadedCounter++;\n                if (loadedCounter === toBeLoadedNumber) {\n                    allImagesLoadedCallback();\n                }\n            });\n        });\n        function preloadImage(url, anImageLoadedCallback) {\n            var img = new Image();\n            img.onload = anImageLoadedCallback;\n            img.src = url;\n        }\n    }\n\n    const imageChange = (e) => {\n        if (e && e.detail && e.detail.image_index && handleImageChange) {\n            handleImageChange({\n                index: e.detail.image_index,\n                item: imageArr[e.detail.image_index]\n            });\n        }\n    }\n\n    const handleMouseDown = () => {\n        setDragState(true);\n    }\n\n    const handleMouseUp = () => {\n        setDragState(false);\n    }\n\n    useEffect(() => {\n        if (threeSixtyRef.current && updateIndex >= 0 && updateIndex < imageArr.length) {\n            threeSixtyRef.current.goto(updateIndex)\n        }\n    }, [updateIndex])\n\n    useEffect(() => {\n        document.addEventListener(`${containerName}_image_changed`, imageChange);\n        if(viewerRef.current) {\n            viewerRef.current.addEventListener('mousedown', handleMouseDown);\n            viewerRef.current.addEventListener('mouseup', handleMouseUp);\n        }\n        return () => {\n            document.removeEventListener(`${containerName}_image_changed`, imageChange);\n            if(viewerRef.current) {\n                viewerRef.current.removeEventListener('mousedown', handleMouseDown);\n                viewerRef.current.removeEventListener('mouseup', handleMouseUp);\n            }\n        }\n    }, []);\n\n    useEffect(() => {\n        if (threeSixtyRef.current) {\n            let newImages = imageArr.map(ite => ite[imageKey])\n            threeSixtyRef.current._updateImage(newImages);\n        }\n    }, [imageArr])\n\n    useEffect(() => {\n        if (viewerRef && viewerRef.current) {\n            threeSixtyRef.current = new ThreeSixty(viewerRef.current, {\n                image: imageArr.map(ite => ite[imageKey]),\n                ...props\n            });\n            preloadImages(imageArr.map(ite => ite[imageKey]), () => {\n                if (autoPlay) {\n                    threeSixtyRef.current.play();\n                }\n                setAllImagesLoaded(true);\n                threeSixtyRef.current._allowScroll();\n            });\n            return () => {\n                if (viewerRef) {\n                    threeSixtyRef.current.destroy();\n                }\n            }\n        }\n    }, [])\n\n    return <>\n        <div ref={viewerRef} style={{\n            position: 'relative',\n            cursor: `url(${dragState ? DragCursor : Cursor}), auto`\n        }}>\n        </div>\n        {\n            !allImagesLoaded && (\n                <div style={{\n                    display: 'initial',\n                    position: 'absolute',\n                    width: '100%',\n                    height: '100%',\n                    left: '0px',\n                    top: '0px',\n                    backgroundPosition: 'center',\n                    backgroundSize: 'contain',\n                    backgroundRepeat: 'no-repeat',\n                    backgroundImage: `url(${imageArr[startIndex][imageKey]})`,\n                    cursor : 'not-allowed'\n                }}>\n                    <div style={{\n                        position: 'absolute',\n                        width : '100px',\n                        height : '100px',\n                        top : 'calc(50% - 50px)',\n                        left : 'calc(50% - 50px)'\n                    }}>\n                        <img src={Loader} style={{\n                            width : '100%',\n                            height : '100%',\n                            animation: 'rotating 2s linear infinite'\n                        }} />\n                    </div>\n                </div>\n            )\n        }\n    </>\n}\n\nexport default memo(ThreeSixtyViewer)\n","import React, { useState, useRef } from 'react'\nimport ThreeSixtyViewer from './Component/ThreeSixtyViewer';\n\nconst App = () => {\n    const imageArr = [...Array(35)].reduce((acc, ite, index) => {\n        acc.push({\n            \"image_url\": `https://spinny-images.s3.ap-south-1.amazonaws.com/temp-assets/nexon-360/${index + 1}.jpg`\n        })\n        return acc;\n    }, []);\n\n    const [updateIndex, setUpdateIndex] = useState(0);\n    // const inputRef = useRef(0);\n\n    const handleImageChange = (image_index) => {\n        console.log('image change', image_index)\n    }\n\n    // const handleInputChange = (value) => {\n    //     if (value && value > 0 && value < imageArr.length) {\n    //         setUpdateIndex(value)\n    //     }\n    // }\n\n    return (\n        <React.Fragment>\n            <div style={{ width: '100vw', height: '100vh' }}>\n                {/* <input type=\"number\" ref={inputRef} onChange={() => handleInputChange(inputRef.current.value)} /> */}\n                <ThreeSixtyViewer imageArr={imageArr} imageKey=\"image_url\" width='auto' height='600' autoPlay={false} speed={100} containerName=\"three-sixty-viewer\" startIndex={0} updateIndex={updateIndex} handleImageChange={(e) => handleImageChange(e)} />\n            </div>\n        </React.Fragment>\n    )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n","module.exports = __webpack_public_path__ + \"static/media/cursor.6fc4ca34.svg\";","module.exports = __webpack_public_path__ + \"static/media/drag_cursor.b809b07e.svg\";","module.exports = __webpack_public_path__ + \"static/media/loader.a09bfd71.svg\";"],"sourceRoot":""}